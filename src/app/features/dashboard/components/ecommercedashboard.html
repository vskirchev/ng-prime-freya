<!--START Demo Purpose Only (remove it afterward)-->
<div class="col-span-6">
    <p-card header="ðŸ—‚ï¸ Task Tracker Pro" class="p-mb-4">
        <form [formGroup]="taskForm" (ngSubmit)="createTask()" class="p-fluid">
            <div class="p-field p-mb-3">
                <label for="title" class="p-d-block p-mb-2">Task Title</label>
                <input
                    id="title"
                    type="text"
                    pInputText
                    formControlName="title"
                    placeholder="Enter task title"
                />

                @if (taskForm.get('title')?.invalid && taskForm.get('title')?.touched) {
                    <small class="p-error">
                        @if (taskForm.get('title')?.errors?.['required']) {
                            Title is required.
                        }
                        @if (taskForm.get('title')?.errors?.['minlength']) {
                            Title must be at least 3 characters long.
                        }
                    </small>
                }
            </div>

            <div class="p-field p-mb-3">
                <label for="description" class="p-d-block p-mb-2">Description</label>
                <input
                    id="description"
                    pInputText
                    formControlName="description"
                    placeholder="Enter task description">
            </div>

            <p-button
                type="submit"
                label="Add Task"
                icon="pi pi-plus"
                [disabled]="taskForm.invalid"
                styleClass="p-button-success p-mt-2">
            </p-button>
        </form>
    </p-card>

    @if (isLoading(); as loading) {
        <div class="p-d-flex p-jc-center p-ai-center p-mt-4">
            <p-progressSpinner></p-progressSpinner>
            <span class="p-ml-3">Loading tasks...</span>
        </div>
    } @else {
        <div class="p-grid p-nogutter">
            <!-- To Do Column -->
            <div class="p-col-12 p-md-4">
                <p-card header="To Do">
                    @for (task of todo(); track task.id) {
                        <div class="p-card p-mb-3 p-p-3">
                            <div class="p-mb-2">
                                <strong>{{ task.title }}</strong>
                                @if (task.description) {
                                    <div class="p-text-secondary">{{ task.description }}</div>
                                }
                            </div>
                            <div class="p-d-flex p-ai-center p-gap-2">
                                <p-button
                                    label="Start"
                                    icon="pi pi-play"
                                    styleClass="p-button-info p-button-sm"
                                    (click)="moveTo(task.id, 'in-progress')"></p-button>
                                <p-button
                                    label="Delete"
                                    icon="pi pi-trash"
                                    styleClass="p-button-danger p-button-sm"
                                    (click)="deleteTask(task.id)"></p-button>
                            </div>
                        </div>
                    } @empty {
                        <p class="p-text-secondary p-mt-2">No tasks yet.</p>
                    }
                </p-card>
            </div>

            <!-- In Progress Column -->
            <div class="p-col-12 p-md-4">
                <p-card header="In Progress">
                    @for (task of inProgress(); track task.id) {
                        <div class="p-card p-mb-3 p-p-3">
                            <div class="p-mb-2">
                                <strong>{{ task.title }}</strong>
                                @if (task.description) {
                                    <div class="p-text-secondary">{{ task.description }}</div>
                                }
                            </div>
                            <div class="p-d-flex p-ai-center p-gap-2">
                                <p-button
                                    label="Complete"
                                    icon="pi pi-check"
                                    styleClass="p-button-success p-button-sm"
                                    (click)="moveTo(task.id, 'done')"></p-button>
                                <p-button
                                    label="Delete"
                                    icon="pi pi-trash"
                                    styleClass="p-button-danger p-button-sm"
                                    (click)="deleteTask(task.id)"></p-button>
                            </div>
                        </div>
                    } @empty {
                        <p class="p-text-secondary p-mt-2">No tasks in progress.</p>
                    }
                </p-card>
            </div>

            <!-- Done Column -->
            <div class="p-col-12 p-md-4">
                <p-card header="Done">
                    @for (task of done(); track task.id) {
                        <div class="p-card p-mb-3 p-p-3">
                            <div class="p-mb-2">
                                <strong>{{ task.title }}</strong>
                                @if (task.description) {
                                    <div class="p-text-secondary">{{ task.description }}</div>
                                }
                            </div>
                            <div class="p-d-flex p-ai-center p-gap-2">
                                <p-button
                                    label="Delete"
                                    icon="pi pi-trash"
                                    styleClass="p-button-danger p-button-sm"
                                    (click)="deleteTask(task.id)"></p-button>
                            </div>
                        </div>
                    } @empty {
                        <p class="p-text-secondary p-mt-2">No completed tasks yet.</p>
                    }
                </p-card>
            </div>
        </div>
    }
</div>
<!--END Demo Purpose Only (remove it afterward)-->

<div class="grid grid-cols-12 gap-8 px-6">
    <div class="col-span-12">
        <message-widget/>
    </div>
    <div class="col-span-12">
        <stats-ecommerce-widget/>
    </div>
    <div class="col-span-12 xl:col-span-8">
        <orders-widget/>
    </div>
    <div class="col-span-12 xl:col-span-4 grid grid-cols-12 gap-8">
        <waiting-action-widget/>
        <sales-by-category-widget/>
    </div>
    <div class="col-span-12 xl:col-span-3">
        <clients-widget/>
    </div>
    <div class="col-span-12 xl:col-span-9">
        <ad-management-widget/>
    </div>
</div>
